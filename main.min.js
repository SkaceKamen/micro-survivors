function microSurvivors(C=document.body,p=400,s=400){let U=["WASD to move","Mouse to aim","Survive","Kill end boss"],l=p/2,o=s/2,{floor:n,ceil:W,random:X,round:J,cos:q,sin:F,min:Q,hypot:c,abs:Z,atan2:M,PI:z,max:ee,tan:ae,sign:N}=Math,B=2*z;var e="Press ENTER to ";let K=e+"restart",r="center",i="top",m="left",G="right",H="middle",h="#fff",$="#aaa",j="#ccc",t="#faa",Y="#0ac",d="#999",re=.3,te=new AudioContext,g=(e=1,a=.05,r=220,t=0,s=0,n=.1,d=0,M=1,l=0,o=0,i=0,m=0,p=0,N=0,c=0,B=0,h=0,g=1,v=0,u=0,f=0)=>{let k=2*z,b=44100,K=l*=500*k/b/b,R=r*=(1-a+2*a*X(a=[]))*k/b,x=0,G=0,S=0,D=1,H=0,$=0,A=0,w=f<0?-1:1,P=k*w*f*2/b,y=q(P),E=F,O=E(P)/4,T=1+O,j=-2*y/T,Y=(1-O)/T,I=(1+w*y)/2/T,V=-(w+y)/T,_=I,L=0,C=0,U=0,W=0;for(t=b*t+9,v*=b,s*=b,n*=b,h*=b,o*=500*k/b**3,c*=k/b,i*=k/b,m*=b,p=b*p|0,e*=re,w=t+v+s+n+h|0;S<w;a[S++]=A*e)++$%(100*B|0)||(A=d?1<d?2<d?3<d?E(x**3):ee(Q(ae(x),1),-1):1-(2*x/k%2+2)%2:1-4*Z(J(x/k)-x/k):E(x),A=(p?1-u+u*E(k*S/p):1)*(A<0?-1:1)*Z(A)**M*(S<t?S/t:S<t+v?1-(S-t)/v*(1-g):S<t+v+s?g:S<w-h?(w-S-h)/n*g:0),A=h?A/2+(h>S?0:(S<w-h?1:(w-S)/h)*a[S-h|0]/2/e):A,f&&(A=W=_*L+V*(L=C)+I*(C=A)-Y*U-j*(U=W))),P=(r+=l+=o)*q(c*G++),x+=P+P*N*E(S**5),D&&++D>m&&(r+=i,R+=i,D=0),!p||++H%p||(r=R,l=K,D=D||1);(e=te.createBuffer(1,w,b)).getChannelData(0).set(a),(r=te.createBufferSource()).buffer=e,r.connect(te.destination),r.start()},v={Ne:[3,,42,.01,.01,.02,3,2,,2,,,,,193,.6,,.53,.02],Ue:[.2,,577,,.05,.09,,3.6,,,,,,,,,,.64,.03,,-1499],We:[.6,,599,.06,.11,.17,,1.2,-1,-5,254,.06,.1,.1,12,,,.86,.25,,-972],Be:[.3,,142,,.23,.5,1,,-2.6,-24,,,.09,,,,,.1,.06],Ce:[.7,,480,.02,.04,.18,3,2.3,,,,,,.6,,.4,,.85,.01,,99]},V=(e,a=2,r="0")=>e.toString().padStart(a,r),_=e=>V(n(e/60))+":"+V(n(e%60)),se=e=>u(e*(180/z))+"Â°",u=(e,a=0)=>e?.toFixed(a)??"",ne=e=>u(e,2),de=(e,a,r,t)=>c(r-e,t-a),le=(e,a)=>{for(var r=[];e.length&&a--;){var t=oe(e);r.push(e[t].A),e.splice(t,1)}return r},oe=r=>{var e=r.map(e=>e.w).reduce((e,a)=>e+a),t=X()*e;for(let e=0,a=0;;e++)if(t<=(a+=r[e].w))return e},f=(e,a)=>a?a-e:e,ie=e=>b.fillStyle=e,k={rect(e,a,r,t,s,n){b[n?"strokeStyle":"fillStyle"]=s,b[n?"strokeRect":"fillRect"](e,a,r,t)},t(e="#000d"){k.rect(0,0,p,s,e)},o(e,a,r,t){ie(t),b.fillRect(e-r/2,a-r/2,r,r)},m(e,a,r,t){ie(t),b.beginPath(),b.moveTo(e,a-r/2),b.lineTo(e-r/2,a+r/2),b.lineTo(e+r/2,a+r/2),b.fill()},text(e,a,r,t,s=m,n=i,d=14){b.font=d+"px monospace",ie(t),b.textAlign=s,b.textBaseline=n,b.fillText(r,e,a)},$e(e,a){k.text(l,e,a,h,r,i)},i(e,a,r,t){ie(t),b.beginPath(),b.arc(e,a,r,0,B),b.fill()},Se:e=>b.globalAlpha=e},me=(e,a,r,t,s,n=!0)=>{var d,l,o=a,i=n?r/2:r;n&&15*(s.length-1)<=t&&(e+=r/4);for([d,l]of s)(d||l)&&(k.text(e,a,d+":",$),k.text(e+i-5,a,""+l,h,G)),o+t<(a+=15)&&(a=o,e+=i)},pe=(e,a,r)=>{e=b.createRadialGradient(l,o,e,l,o,l);return e.addColorStop(0,a),e.addColorStop(1,r),e},ce=document.createElement("canvas"),b=(ce.width=p,ce.height=s,ce.getContext`2d`),he={38:"u",40:"d",37:"l",39:"r",87:"u",83:"d",65:"l",68:"r",13:"e",27:"p",80:"p"},R={u:!1,d:!1,l:!1,r:!1,e:!1,p:!1,Ye:0,Ve:0},x={};e=a=>e=>{e=he[e.which];e&&(R[e]=a,x[e]=a)},onkeydown=e(!0),onkeyup=e(!1),onmousemove=e=>{var a=ce.getBoundingClientRect();R.Ye=e.clientX-a.left,R.Ve=e.clientY-a.top},e=e=>{let r=e[0],t=[e[0]];return e.forEach((e,a)=>{r={...r,...e},t[a]=r}),t};let ge=0,ve=(e,a,r,t=20)=>{e.T-=a,e.P=.1,t&&(e.He=[q(r)*t,F(r)*t]),ge++<4&&g(...v.Be),E.I+=a},ue=(a,e,r)=>{var t=a.g,s=e*(a.v*P.C.$.A),n=B/a.Ee;for(let e=0;e<a.Ee;e++){var d=s+n*e;r(P.x+q(d)*t,P.y+F(d)*t,d)}};var a={l:"Orbs",q:"Orbiting orbs",u:e([{h:10,g:50,v:z/1.5,R:.1,Ee:1,S:10},{Ee:2},{h:15,v:z/1.25},{v:+z,S:15},{Ee:3},{h:20},{Ee:4}]),D(e,a){let s=a.h+P.C.h.A,n=a.S*P.C.g.A;ue(a,e.D,(e,a,r)=>{for(var t of I)de(t.x,t.y,e,a)<n/2+(t.K.S??5)+2&&ve(t,s,r)})},N(e,a){let r=a.S*P.C.g.A;ue(a,e.D,(e,a)=>{k.i(e,a,r/2,h)})},O:(e,a)=>[["damage",f(e.h,a?.h)],["range",f(e.g,a?.g)],["speed",f(e.v,a?.v),e=>se(e)+"/s"],["count",f(e.Ee,a?.Ee)],["size",f(e.S,a?.S)]]},S={l:"Sword",q:"melee weapon",u:e([{h:8,_e:z/4,g:80,R:.5},{h:13},{_e:z/4*1.2,g:90},{h:18},{h:23},{h:28,_e:z/4*1.5},{h:33,_e:z/4*1.7,g:120}]),D(e,a){var r,t=a.h+P.C.h.A,s=a.g*P.C.g.A,a=a._e/2,n=P.L-a,d=P.L+a;for(r of I){var l=r.x-P.x,o=r.y-P.y,i=M(o,l),l=c(l,o),o=M((r.K.S??5)/2,l);n<i+o&&i-o<d&&l-(r.K.S??5)/2<s&&ve(r,t,i)}},N(e,a){var r=a.R*P.C.$.A,t=a.g*P.C.g.A,e=.2*(e.M/r);0<e&&(r=a._e/2,ie(`rgba(255,255,255,${e})`),b.beginPath(),b.moveTo(P.x,P.y),b.lineTo(P.x+q(P.L-r)*t,P.y+F(P.L-r)*t),b.arc(P.x,P.y,t,P.L-r,P.L+r),b.lineTo(P.x,P.y),b.fill())},O:(e,a)=>[["damage",f(e.h,a?.h)],["range",f(e.g,a?.g)],["angle",f(e._e,a?._e),se]]},e={l:"Barbed Wire",q:"area damage",u:e([{g:40,h:2,R:.75},{g:60},{h:3},{g:70},{g:80},{h:4}]),D(e,a){var r,t=a.h+P.C.h.A,s=a.g*P.C.g.A;for(r of I)de(P.x,P.y,r.x,r.y)<s&&ve(r,t,0,0)},N(e,a){var r=a.R*P.C.$.A,a=a.g*P.C.g.A,e=e.M/r,r=.15+.04*q(2*e*z);k.i(P.x,P.y,a,`rgba(255,0,0,${r})`)},O:(e,a)=>[["damage",f(e.h,a?.h)],["range",f(e.g,a?.g)]]};let fe=e=>({K:e,D:0,M:0,W:0}),D=[{l:"Warrior",Ke:S,C:{T:50,G:45,H:.05,V:50,h:0,$:1,j:.01,De:1,g:1},ye:{G:.2,H:.025,h:.3},N:(e,a)=>k.o(e,a,10,h)},{l:"Monk",Ke:e,C:{T:50,G:60,H:.05,V:50,h:0,$:1,j:.01,De:0,g:1},ye:{H:.03,V:1,g:.025},N:(e,a)=>k.m(e,a,10,h)},{l:"Magic Man",Ke:a,C:{T:50,G:45,H:.05,V:50,h:0,$:1,j:.01,De:0,g:1},ye:{G:.2,$:-.026,H:.03,De:.25,g:.02},N:(e,a)=>k.i(e,a,5,h)}],ke=100;var A=t=>{let s;return{l:t.l,q(){var e,a,r=s?.F??P.Y.find(e=>e.K===t);return r?s?.W===r.W?s.q:(a=r.K.u[r.W],e=r.K.u[r.W+1],a=r.K.O(a,e).filter(e=>!!e[1]).map(([e,a,r=u])=>`+${r(a)} `+e).join(", "),s={W:r.W,F:r,q:a},a):t.q},X(){var e=P.Y.find(e=>e.K===t);e?e.W++:P.Y.push(fe(t))},Ae:()=>P.Y.some(e=>e.K===t)?ke:25,_:t.u.length-1}};let be=[{l:"Speed boost",q:"+5% speed",X(){P.C.G.J+=.05}},{l:"Speed base",q:"+1 base speed",X(){P.C.G.Z+=1}},{l:"Max health",q:"+25 max health, +5 health",X(){P.C.T.Z+=25,P.T+=5}},{l:"Health drop",q:"+1% health drop chance",X:()=>P.C.j.Z+=.01},{l:"Regen",q:"+0.05/s health regen",X:()=>P.C.H.Z+=.05},{l:"Regen boost",q:"+10% health regen",X:()=>P.C.H.J+=.1},{l:"Pickup range",q:"+10 pickup range",X:()=>P.C.V.Z+=10},{l:"Damage",q:"+1 damage",X:()=>P.C.h.Z+=1},{l:"Attack speed",q:"+5% attack speed",X:()=>P.C.$.Z-=.05},{l:"Armor",q:"+1 armor",X:()=>P.C.De.Z+=1},{l:"Area",q:"+10% area",X:()=>P.C.g.Z+=.1},A(a),A(S),A(e)],w=(e=0,a=0,r=1)=>({Z:e,J:r,get A(){return(this.Z+P.W*a)*this.J}}),Re=e=>({K:e,x:0,y:0,W:0,re:0,te:5,T:e.C.T,se:0,ne:0,oe:0,L:0,C:{T:w(e.C.T,e.ye.T),H:w(e.C.H,e.ye.H),De:w(e.C.De,e.ye.De),h:w(e.C.h,e.ye.h),$:w(e.C.$,e.ye.$),g:w(e.C.g,e.ye.g),G:w(e.C.G,e.ye.G),V:w(e.C.V,e.ye.V),j:w(e.C.j,e.ye.j)},me:[],Y:[fe(e.Ke)]}),P=Re(D[0]),y={Oe:0,de:1,ie:2,le:3,Le:4,pe:5,Pe:6},xe={ce:-1,Te:0,I:0,ue:0,he:0,me:[],Ie:0,Me:0},E={ge:y.pe,...xe},Se=e=>Object.assign(P,Re(e));var a=(e,n)=>(r,t,s)=>e.map((e,a)=>k.o(r+2*a,t+2*a,n,s??e)),S=(e,n)=>(r,t,s)=>e.map((e,a)=>k.m(r+2*a,t+2*a,n,s??e)),A=(e,n)=>(r,t,s)=>e.map((e,a)=>k.i(r+2*a,t+2*a,n,s??e)),e={T:10,G:26,h:8,re:1,N:a([$],10)},De={T:50,G:26,h:12,re:2,N:a([$,t],10)},O={T:100,G:30,h:14,re:3,N:a([$,t,"#4a4"],10)},Ae={T:1e3,G:30,h:15,re:100,S:20,N:a([t],20),ve:!0},a={T:80,G:10,h:8,re:1,N:a([d],10)},we={T:20,G:35,h:8,re:2,N:S([d],10)},Pe={T:40,G:35,h:12,re:3,N:S([d,Y],10)},ye={T:60,G:35,h:14,re:4,N:S([d,Y,"#966"],10)},Ee={T:150,G:20,h:10,re:4,N:S([d,d,d],10)},S={T:3e3,G:35,h:20,re:200,ve:!0,Re:80,S:20,N:S([t],20)},Oe={T:10,G:40,h:8,re:3,N:A([d],5)},Te={T:20,G:40,h:12,re:4,N:A([d,Y],5)},Ie={T:50,G:40,h:14,re:5,N:A([d,Y,"#4ca"],5)},A={T:5e3,G:40,h:20,re:300,ve:!0,Re:80,S:20,N:A([t],10)};let Le=(r,e,t=1)=>Array.from({length:n((e-r)/t)}).map((e,a)=>a*t+r);var Ce,Ue=r=>()=>{var e=2*(r.S??5),a=Le(P.x-l,P.x+l,4+e),e=Le(P.y-o,P.y+o,4+e);a.map(e=>T(e,P.y-o,r)),a.map(e=>T(e,P.y+o,r)),e.map(e=>T(P.x-l,e,r)),e.map(e=>T(P.x+l,e,r))};let We=[{be:[e]},{be:[e,we]},{be:[we,Oe],ve:Ae},{be:[we,Oe]},{be:[De],ke:Ue(a)},{be:[De,Pe,Oe]},{be:[Pe,Oe],ve:S},{be:[De,Pe,Te]},{be:[Te,O],ke:(Ce=Te,()=>{var e=B/40;Le(0,B,e).map(e=>{var a=P.x+q(e)*l,e=P.y+F(e)*o;T(a,e,Ce)})})},{be:[O,ye]},{be:[O,ye]},{be:[O,ye,Ie]},{be:[O,ye],ve:A},{be:[O,ye,Ie],xe:.1,ke:Ue(Ee)},{be:[],ve:{T:8e3,G:60,h:20,re:0,ve:!0,Re:1e3,S:25,N(e,a,r){k.i(e,a,25,r??t),k.o(e,a,25,r??Y),k.m(e,a,23,r??t)}}}],Me=540,Ne=Me/(We.length-1),T=(e,a,r)=>I.push({x:e,y:a,K:r,T:r.T,M:0,He:[0,0],P:0,ve:!!r.ve}),I=[],Be=[],L=50,Ke=2*L,Ge=()=>{var e=n((P.x-l)/L)*L,r=n((P.y-o)/L)*L,t=W((P.x+l)/L)*L,s=W((P.y+o)/L)*L;for(let a=e;a<t;a+=L)for(let e=r;e<s;e+=L)k.rect(a,e,L,L,a%Ke==0?e%Ke==0?"#000":"#111":e%Ke==0?"#111":"#000")},He=()=>{for(var e of P.Y)e.K.N(e,e.K.u[e.W]);P.K.N(P.x,P.y)},$e=()=>{for(var e of I){var a=e.K;a.N(e.x,e.y,0<e.P?h:void 0),a.ve&&(k.rect(e.x-20,e.y+15,40,3,"#333"),k.rect(e.x-20,e.y+15,e.T/a.T*40,3,"#f33"))}},je=()=>{for(var e of Be)k.o(e.x-3,e.y-3,10<=(e.re??0)?8:6,0<(e.T??0)?"#0c0":(e.re??0)<10?"#05f":"#ff0")},Ye={h:"Base damage",$:"Attack speed",g:"Area",T:"Health",H:"Regen",De:"Armor",G:"Speed",j:"Health Drop",V:"Pickup Distance"},Ve={$:e=>ne(2-e),T:n,g:ne,G:ne,H:e=>ne(e)+"/s",j:e=>u(100*e)+"%"},_e=e=>e+"/level",qe=(e,a)=>{var r,t=Object.entries(e.C).map(([e,a])=>[Ye[e],(Ve[e]??u)(a.A)]),s=t.push.bind(t);a&&(s([]),s(...Object.entries(e.K.ye).map(([e,a])=>[Ye[e],_e(u(Z(a),2))])),s([]));for(r of e.Y){let t=r.K.l;s([t+" level",r.W+1],...r.K.O(r.K.u[r.W]).map(([e,a,r=u])=>[t+" "+e,r(a)]))}return t},Fe=(e,a,r)=>{var t=qe(P);me(e,a,r,s-a-40,t)},ze=(e,a,r)=>{var t;for(t of[["Survived",_(E.Te)],["Level",""+(P.W+1)],["Damage",u(E.I)],["DPS",""+u(E.I/E.Te,2)],["Kills",""+E.ue]])k.text(e+r/2-5,a,t[0],j,G),k.text(e+r/2+5,a,t[1],h,m),a+=15;return a},Xe=()=>{if(k.rect(50,0,p-50,20,"#600"),k.rect(50,0,P.T/P.C.T.A*(p-50),20,"#f66"),k.text(52,10,n(P.T)+"/"+n(P.C.T.A),h,m,H),k.rect(50,20,p-50,12,d),k.rect(50,20,P.re/P.te*(p-50),12,h),k.text(52,27,P.re+"/"+P.te,"#000",m,H),k.rect(0,0,50,32,"#000"),k.text(25,2,"level","#666",r,i),k.text(25,18,""+(P.W+1),h,r,i),k.text(l,35,_(E.Te),h,r),E.Te<20){let e=s-30-15*U.length;for(var a of U)k.text(10,e,a,h,m,i),e+=15}},Je=(a,r,t,s,n,d)=>{for(let e=0;e<d.length;e++)k.rect(a,r,t,s,e===E.Ie?"#333":"#222"),k.rect(a,r,t,s,e===E.Ie?"#aa3":"#444",!0),n(a,r,d[e]),r+=s+5;return r},Qe={[y.de](){var e;k.t(),k.text(l,100,"YOU'RE DEAD!","#f88",r,i,24),e=ze(50,145,p-100),e+=30,k.text(l,e,K,h,r)},[y.le](){k.t(),k.$e(40,"PAUSED"),Fe(20,80,p-40)},[y.Pe](){k.t(),k.$e(10,"PICK CLASS"),Je(20,50,100,20,(e,a,r)=>{r.N(e+10,a+10),k.text(e+20,a+10,r.l,h,m,H)},D);var e=qe(P,!0);me(140,30,p-140-20,s-60,e,!1)},[y.ie](){k.t(),k.$e(10,"LEVEL UP"),Je(20,50,p-40,40,(e,a,r)=>{var t=P.me.filter(e=>e===r).length;k.text(e+5,a+5,r.l,h),k.text(e+5,a+22,"string"==typeof r.q?r.q:r.q(),j),k.text(e+p-50,a+20,t+"/"+(r._??5),j,G,H)},E.me),Fe(20,210,p-40)},[y.pe](){k.t(),k.text(l,o-40,"MICRO",h,r,"bottom",68),k.text(l,o-40,"SURVIVORS",h,r,i,38),k.text(l,s-5,"by Kamen",j,r,"bottom",10),k.Se(.75+.25*q(performance.now()/1e3*5)),k.text(l,o+50,"Press ENTER to start",h,r),k.Se(1)},[y.Le](){k.t(),k.text(l,100,"YOU WON",h,r,H);var e=ze(100,130,p-200);e+=30,k.text(l,e,K,h,r)}},Ze=()=>{E.ge!==y.pe&&E.ge!==y.Pe&&Xe(),Qe[E.ge]?.()},ea=()=>{var e=Q(1,P.ne/.5),e=(0<e&&(e=pe(80,"#f000",`rgba(255,0,0,${e})`),k.t(e)),Q(1,P.oe/.1));0<e&&(e=pe(130,"#fff0",`rgba(255,255,255,${.15*e})`),k.t(e))},aa=(e,a,r,t)=>Be.push({x:e,y:a,re:t,T:r}),ra=t=>{let s=0;var n,d=[];for(n of I){let r=n.K;if(n.T<=0)aa(n.x,n.y,0,r.re),X()<P.C.j.A&&aa(n.x,n.y,5),E.ue+=1,d.push(s);else{0<n.P&&(n.P-=t);let e=n.He[0]*t,a=n.He[1]*t;var l,o=P.x-n.x,i=P.y-n.y,m=c(o,i);!n.ve&&3*p<m?d.push(s):(n.M<=0?(m<5+(n.K.S??5)-1&&(P.T-=ee(0,r.h-P.C.De.A),P.ne=.5,n.M=1,g(...v.Ce)),l=r.G*t,e+=o/m*l,a+=i/m*l):n.M-=t,n.x+=e,n.y+=a,n.He=n.He.map(e=>{var a=-N(e)*t*(r.Re??20);return Z(a)>Z(e)?0:e+a}))}s++}let a=0;for(let e of d)I.splice(e-a,1),a+=1},ta=e=>{var a=X()*B,r=ee(p,s)/2,r=c(r,r)+15*X();T(P.x+q(a)*r,P.y+F(a)*r,e)},sa=e=>{Se(e),Object.assign(E,xe),E.ge=y.Oe,I.length=0,Be.length=0},na=()=>{x.u&&0<E.Ie&&(E.Ie--,g(...v.Ne)),x.d&&E.Ie<E.Me&&(E.Ie++,g(...v.Ne))},da=0,la=e=>{switch(E.ge){case y.Oe:E.Te+=e,x.p&&(E.ge=y.le),P.T<=0&&(E.ge=y.de);var a=n(E.Te/Ne),r=We[a];if(E.Te>Me&&0===I.length&&(E.ge=y.Le),r){a!==E.ce&&(E.ce=a,r.ve&&ta(r.ve),r.ke?.());for(var t=r.xe??.2;t&&E.he>t;)0<r.be.length&&ta(r.be[da++%r.be.length]),E.he-=t;E.he+=e}break;case y.Le:case y.de:case y.pe:R.e&&(E.Ie=0,E.Me=D.length-1,Se(D[0]),E.ge=y.Pe,g(...v.Ne));break;case y.Pe:na();a=D[E.Ie];P.K!==a&&Se(a),x.e&&(sa(D[E.Ie]),g(...v.Ne));break;case y.ie:na(),x.e&&((a=E.me[E.Ie]).X(),P.me.push(a),E.ge=y.Oe,g(...v.Ne));break;case y.le:(x.p||x.e)&&(E.ge=y.Oe)}},oa=e=>{let a=ge=0,r=0;R.u&&--r,R.d&&(r+=1),R.l&&--a,R.r&&(a+=1);var t,s,n=P.C.G.A*e,d=c(a,r);0<d&&(P.x+=a/d*n,P.y+=r/d*n),P.L=M(R.Ve-l,R.Ye-o),P.re>=P.te&&(P.W+=1,P.re-=P.te,P.te+=10,d=be.filter(a=>!(P.me.filter(e=>e===a).length>=(a._??5))).map(e=>({A:e,w:e.Ae?.()??ke})),E.me=le(d,3),0<E.me.length&&(E.ge=y.ie,E.Ie=0,E.Me=E.me.length-1),g(...v.We),P.T+=5),0<P.ne&&(P.ne-=e),0<P.oe&&(P.oe-=e),P.T=Q(P.C.T.A,P.T+P.C.H.A*e);for(t of P.Y)t.D+=e,t.M<=0?(s=t.K.u[t.W],t.K.D(t,s),t.M=s.R*P.C.$.A):t.M-=e},ia=e=>{let a=0;var r,t=[];for(r of Be){var s,n=P.x-r.x,d=P.y-r.y,l=c(n,d);l<10?(P.T=Q(P.C.T.A,P.T+(r.T??0)),P.re+=r.re??0,P.oe=.1,g(...v.Ue),t.push(a)):l<P.C.V.A&&(s=(P.C.V.A+10-l)*e*2,r.x+=n/l*s,r.y+=d/l*s),a++}let o=0;for(let e of t)Be.splice(e-o,1),o+=1},ma=0,pa=e=>{requestAnimationFrame(pa);var a=(e-ma)/1e3;ma=e,b.reset(),b.clearRect(0,0,p,s),b.translate(-P.x+l,-P.y+o),Ge(),je(),He(),$e(),b.resetTransform(),ea(),Ze(),e=a,la(e),E.ge===y.Oe&&(ra(e),ia(e),oa(e)),x={}};return C.appendChild(ce),requestAnimationFrame(pa),[P,E]}