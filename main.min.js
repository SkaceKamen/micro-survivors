function microSurvivors(L=document.body,p=400,t=400){let U="monospace",C=()=>["WASD to move",E.Y[0].K===Se?"Mouse to aim":void 0,"Survive","Kill end boss"],l=p/2,i=t/2,{floor:n,ceil:W,random:J,round:Q,cos:q,sin:F,min:Z,hypot:M,abs:z,atan2:N,PI:X,max:ee,tan:ae,sign:B}=Math,o=2*X;var e="Press ENTER to ";let K=e+"restart",r="center",m="top",H="left",$="right",j="middle",c="#fff",G="#aaa",Y="#ccc",s="#faa",d="#0ac",h="#999",re=.3,te=new AudioContext,g=(e=1,a=.05,r=220,t=0,s=0,n=.1,d=0,M=1,l=0,i=0,o=0,m=0,p=0,N=0,c=0,B=0,h=0,g=1,v=0,u=0,f=0)=>{let k=2*X,b=44100,K=l*=500*k/b/b,R=r*=(1-a+2*a*J(a=[]))*k/b,x=0,H=0,S=0,D=1,$=0,j=0,A=0,w=f<0?-1:1,P=k*w*f*2/b,E=q(P),y=F,O=y(P)/4,T=1+O,G=-2*E/T,Y=(1-O)/T,I=(1+w*E)/2/T,V=-(w+E)/T,_=I,L=0,U=0,C=0,W=0;for(t=b*t+9,v*=b,s*=b,n*=b,h*=b,i*=500*k/b**3,c*=k/b,o*=k/b,m*=b,p=b*p|0,e*=re,w=t+v+s+n+h|0;S<w;a[S++]=A*e)++j%(100*B|0)||(A=d?1<d?2<d?3<d?y(x**3):ee(Z(ae(x),1),-1):1-(2*x/k%2+2)%2:1-4*z(Q(x/k)-x/k):y(x),A=(p?1-u+u*y(k*S/p):1)*(A<0?-1:1)*z(A)**M*(S<t?S/t:S<t+v?1-(S-t)/v*(1-g):S<t+v+s?g:S<w-h?(w-S-h)/n*g:0),A=h?A/2+(h>S?0:(S<w-h?1:(w-S)/h)*a[S-h|0]/2/e):A,f&&(A=W=_*L+V*(L=U)+I*(U=A)-Y*C-G*(C=W))),P=(r+=l+=i)*q(c*H++),x+=P+P*N*y(S**5),D&&++D>m&&(r+=o,R+=o,D=0),!p||++$%p||(r=R,l=K,D=D||1);(e=te.createBuffer(1,w,b)).getChannelData(0).set(a),(r=te.createBufferSource()).buffer=e,r.connect(te.destination),r.start()},v={Ne:[3,,42,.01,.01,.02,3,2,,2,,,,,193,.6,,.53,.02],Ue:[.2,,577,,.05,.09,,3.6,,,,,,,,,,.64,.03,,-1499],We:[.6,,599,.06,.11,.17,,1.2,-1,-5,254,.06,.1,.1,12,,,.86,.25,,-972],Be:[.3,,142,,.23,.5,1,,-2.6,-24,,,.09,,,,,.1,.06],Ce:[.7,,480,.02,.04,.18,3,2.3,,,,,,.6,,.4,,.85,.01,,99]},V=(e,a=2,r="0")=>e.toString().padStart(a,r),_=e=>V(n(e/60))+":"+V(n(e%60)),se=e=>u(e*(180/X))+"Â°",u=(e,a=0)=>e?.toFixed(a)??"",ne=e=>u(e,2);let de=(e,a,r)=>{for(var t=[];e.length&&a--;){var s=le(e,r);t.push(e[s]),e.splice(s,1)}return t},le=(r,t)=>{var e=r.map(t).reduce((e,a)=>e+a),s=J()*e;for(let e=0,a=0;;e++)if(s<=(a+=t(r[e])))return e},f=(e,a)=>a?a-e:e,ie=e=>R.fillStyle=e,k=(e,a,r,t,s,n)=>{R[n?"strokeStyle":"fillStyle"]=s,R[n?"strokeRect":"fillRect"](e,a,r,t)},a=(e="#000d")=>{k(0,0,p,t,e)},oe=(e,a,r,t)=>{ie(t),R.fillRect(e-r/2,a-r/2,r,r)},me=(e,a,r,t)=>{ie(t),R.beginPath(),R.moveTo(e,a-r/2),R.lineTo(e-r/2,a+r/2),R.lineTo(e+r/2,a+r/2),R.fill()},b=(e,a,r,t,s=H,n=m,d=14)=>{R.font=d+"px "+U,ie(t),R.textAlign=s,R.textBaseline=n,R.fillText(r,e,a)},pe=(e,a)=>{b(l,e,a,c,r,m)},ce=(e,a,r,t)=>{ie(t),R.beginPath(),R.arc(e,a,r,0,o),R.fill()},he=e=>R.globalAlpha=e,ge=(e,a,r,t,s,n=!0)=>{var d,l,i=a,o=n?r/2:r;n&&15*(s.length-1)<=t&&(e+=r/4);for([d,l]of s)(d||l)&&(b(e,a,d+":",G),b(e+o-5,a,""+l,c,$)),i+t<(a+=15)&&(a=i,e+=o);return a},ve=(e,a,r)=>{e=R.createRadialGradient(l,i,e,l,i,l);return e.addColorStop(0,a),e.addColorStop(1,r),e},ue=document.createElement("canvas"),R=(ue.width=p,ue.height=t,ue.getContext`2d`),fe={38:"u",40:"d",37:"l",39:"r",87:"u",83:"d",65:"l",68:"r",13:"e",69:"e",27:"p",80:"p"},x={u:!1,d:!1,l:!1,r:!1,e:!1,p:!1,Ye:0,Ve:0},S={};e=r=>e=>{var a=fe[e.which];a&&(e.preventDefault(),x[a]=r,S[a]=r)},onkeydown=e(!0),onkeyup=e(!1),onmousemove=e=>{var a=ue.getBoundingClientRect();x.Ye=e.clientX-a.left,x.Ve=e.clientY-a.top},onblur=()=>{O.ge===y.Oe&&(O.ge=y.le)},e=e=>{let r=e[0],t=[e[0]];return e.forEach((e,a)=>{r={...r,...e},t[a]=r}),t};let ke=0,be=(e,a,r,t=20)=>{e.T-=a,e.P=.1,t&&(e.He=[q(r)*t,F(r)*t]),ke++<4&&g(...v.Be),O.I+=a},Re=(e,a,r,t)=>{for(var s of T){var n=s.x-(r??E.x),d=s.y-(t??E.y),l=M(n,d),d=N(d,n);l<e+(s.K.S??5)&&a(s,d,l)}},xe=(a,e,r)=>{var t=a.g,s=e*(a.v*(2-E.C.$.A)),n=o/a.Ee;for(let e=0;e<a.Ee;e++){var d=s+n*e;r(E.x+q(d)*t,E.y+F(d)*t,d)}};var D={l:"Orbs",q:"Orbiting orbs",u:e([{h:10,g:50,v:X/1.5,R:.1,Ee:1,S:10},{Ee:2},{h:15,v:X/1.25},{v:+X,S:15},{Ee:3},{h:20},{Ee:4}]),D(e,a){let t=a.h+E.C.h.A,s=a.S*E.C.g.A;xe(a,e.D,(e,a,r)=>Re(s/2,e=>be(e,t,r),e,a))},N(e,a){let r=a.S*E.C.g.A;xe(a,e.D,(e,a)=>{ce(e,a,r/2,c)})},O:(e,a)=>[["damage",f(e.h,a?.h)],["area",f(e.g,a?.g)],["speed",f(e.v,a?.v),e=>se(e)+"/s"],["count",f(e.Ee,a?.Ee)],["size",f(e.S,a?.S)]]};let Se={l:"Sword",q:"melee weapon",u:e([{h:8,_e:X/4,g:80,R:.5},{h:13},{_e:X/4*1.2,g:90},{h:18},{h:23},{h:28,_e:X/4*1.5},{h:33,_e:X/4*1.7,g:120}]),D(e,a){let s=a.h+E.C.h.A,n=a._e/2*E.C.g.A;Re(a.g,(e,a,r)=>{var r=N((e.K.S??5)/2,r),t=a-E.L;z((t+X)%o-X)<n+r&&be(e,s,a)})},N(e,a){var r=a.R*E.C.$.A,t=a.g,e=.2*(e.M/r);0<e&&(r=a._e/2*E.C.g.A,ie(`rgba(255,255,255,${e})`),R.beginPath(),R.moveTo(E.x,E.y),R.lineTo(E.x+q(E.L-r)*t,E.y+F(E.L-r)*t),R.arc(E.x,E.y,t,E.L-r,E.L+r),R.lineTo(E.x,E.y),R.fill())},O:(e,a)=>[["damage",f(e.h,a?.h)],["area",f(e.g,a?.g)],["angle",f(e._e,a?._e),se]]};e={l:"Barbed Wire",q:"area damage",u:e([{g:40,h:2,R:.75},{g:60},{h:3},{g:70},{g:80},{h:4}]),D(e,a){let r=a.h+E.C.h.A;a=a.g*E.C.g.A;Re(a,(e,a)=>be(e,r,a,0))},N(e,a){var r=a.R*E.C.$.A,a=a.g*E.C.g.A,e=e.M/r,r=.15+.04*q(2*e*X);ce(E.x,E.y,a,`rgba(255,0,0,${r})`)},O:(e,a)=>[["damage",f(e.h,a?.h)],["area",f(e.g,a?.g)]]};let De=e=>({K:e,D:0,M:0,W:0}),A=[{l:"Warrior",Ke:Se,C:{T:75,G:45,H:.05,V:50,h:0,$:1,j:.01,De:1,g:1},ye:{G:.2,H:.025,h:.3},N:(e,a)=>oe(e,a,10,c)},{l:"Monk",Ke:e,C:{T:75,G:60,H:.05,V:50,h:0,$:1,j:.01,De:0,g:1},ye:{H:.03,V:1,g:.025},N:(e,a)=>me(e,a,10,c)},{l:"Magic Man",Ke:D,C:{T:75,G:45,H:.05,V:50,h:0,$:1,j:.01,De:0,g:1},ye:{G:.2,$:-.026,H:.03,De:.25,g:.02},N:(e,a)=>ce(e,a,5,c)}],Ae=100,we=0;var w=t=>{let s;return{l:t.l,q(){var e,a,r=(s=s?.Fe!==we?void 0:s)?.F??E.Y.find(e=>e.K===t);return r?s?.W===r.W?s.q:(a=r.K.u[r.W],e=r.K.u[r.W+1],a=r.K.O(a,e).filter(e=>!!e[1]).map(([e,a,r=u])=>`+${r(a)} `+e).join(", "),s={Fe:we,W:r.W,F:r,q:a},a):t.q},X(){var e=E.Y.find(e=>e.K===t);e?e.W++:E.Y.push(De(t))},Ae:()=>E.Y.some(e=>e.K===t)?Ae:25,_:t.u.length-1}};let Pe=[{l:"Speed boost",q:"+5% speed",X(){E.C.G.J+=.05}},{l:"Speed base",q:"+1 base speed",X(){E.C.G.Z+=1}},{l:"Max health",q:"+25 max health, +5 health",X(){E.C.T.Z+=25,E.T+=5}},{l:"Health drop",q:"+1% health drop chance",X:()=>E.C.j.Z+=.01},{l:"Regen",q:"+0.05/s health regen",X:()=>E.C.H.Z+=.05},{l:"Regen boost",q:"+10% health regen",X:()=>E.C.H.J+=.1},{l:"Pickup range",q:"+10 pickup range",X:()=>E.C.V.Z+=10},{l:"Damage",q:"+1 damage",X:()=>E.C.h.Z+=1},{l:"Attack speed",q:"+5% attack speed",X:()=>E.C.$.Z-=.05},{l:"Armor",q:"+1 armor",X:()=>E.C.De.Z+=1},{l:"Area",q:"+10% area",X:()=>E.C.g.Z+=.1},w(D),w(Se),w(e)],P=(e=0,a=0,r=1)=>({Z:e,J:r,get A(){return(this.Z+E.W*a)*this.J}}),Ee=e=>({K:e,x:0,y:0,W:0,re:0,te:5,T:e.C.T,se:0,ne:0,oe:0,L:0,ze:0,C:{T:P(e.C.T,e.ye.T),H:P(e.C.H,e.ye.H),De:P(e.C.De,e.ye.De),h:P(e.C.h,e.ye.h),$:P(e.C.$,e.ye.$),g:P(e.C.g,e.ye.g),G:P(e.C.G,e.ye.G),V:P(e.C.V,e.ye.V),j:P(e.C.j,e.ye.j)},me:[],Y:[De(e.Ke)]}),E=Ee(A[0]),y={Oe:0,de:1,ie:2,le:3,Le:4,pe:5,Pe:6},ye={ce:-1,Te:0,I:0,ue:0,he:0,me:[],Ie:0,Me:0},O={ge:y.pe,...ye},Oe=e=>Object.assign(E,Ee(e));var D=(e,n)=>(r,t,s)=>e.map((e,a)=>oe(r+2*a,t+2*a,n,s??e)),w=(e,n)=>(r,t,s)=>e.map((e,a)=>me(r+2*a,t+2*a,n,s??e)),e=(e,n)=>(r,t,s)=>e.map((e,a)=>ce(r+2*a,t+2*a,n,s??e)),Te={T:10,G:26,h:8,re:1,N:D([G],10)},Ie={T:50,G:26,h:12,re:2,N:D([G,s],10)},Le={T:100,G:30,h:15,re:3,N:D([G,s,"#4a4"],10)},Ue={T:1e3,G:30,h:15,re:100,S:20,N:D([s],20),ve:!0},D={T:100,G:16,h:6,re:1,N:D([h],10)},Ce={T:20,G:35,h:8,re:2,N:w([h],10)},We={T:40,G:35,h:10,re:3,N:w([h,d],10)},Me={T:60,G:35,h:12,re:4,N:w([h,d,"#966"],10)},Ne={T:220,G:20,h:10,re:4,N:w([h,h,h],10)},w={T:3e3,G:35,h:20,re:200,ve:!0,Re:80,S:10,N:w([s],20)},Be={T:10,G:40,h:8,re:3,N:e([h],5)},Ke={T:20,G:40,h:10,re:4,N:e([h,d],5)},He={T:50,G:40,h:12,re:5,N:e([h,d,"#4ca"],5)},$e={T:200,G:25,h:12,re:4,S:8,N:e([d],8)},e={T:5e3,G:50,h:25,re:300,ve:!0,Re:80,S:15,N:e([s],15)};let je=(r,e,t=1)=>Array.from({length:n((e-r)/t)}).map((e,a)=>a*t+r);var Ge,Ye=r=>()=>{var e=2*(r.S??5),a=je(E.x-l,E.x+l,4+e),e=je(E.y-i,E.y+i,4+e);a.map(e=>Fe(e,E.y-i,r)),a.map(e=>Fe(e,E.y+i,r)),e.map(e=>Fe(E.x-l,e,r)),e.map(e=>Fe(E.x+l,e,r))};let Ve=[{be:[Te]},{be:[Te,Ce]},{be:[Ce,Be],ve:Ue},{be:[Ce,Be]},{be:[Ie],ke:Ye(D)},{be:[Ie,We,Be]},{be:[We,Be],ve:w},{be:[Ie,We,Ke]},{be:[Ke,Le],ke:(Ge=$e,()=>{var e=o/40;je(0,o,e).map(e=>Fe(E.x+q(e)*l,E.y+F(e)*i,Ge))})},{be:[Le,Me]},{be:[Le,Me]},{be:[Le,Me,He]},{be:[Le,Me],ve:e},{be:[Le,Me,He],xe:.1,ke:Ye(Ne)},{be:[],ve:{T:8e3,G:65,h:55,re:0,ve:!0,Re:1e3,S:25,N(e,a,r){ce(e,a,25,r??s),oe(e,a,25,r??d),me(e,a,23,r??s)}}}],_e=600,qe=_e/(Ve.length-1),Fe=(e,a,r)=>T.push({x:e,y:a,K:r,T:r.T,M:0,He:[0,0],P:0,ve:!!r.ve}),T=[],ze=[],I=50,Xe=2*I,Je=()=>{var e=n((E.x-l)/I)*I,r=n((E.y-i)/I)*I,t=W((E.x+l)/I)*I,s=W((E.y+i)/I)*I;for(let a=e;a<t;a+=I)for(let e=r;e<s;e+=I)k(a,e,I,I,a%Xe==0?e%Xe==0?"#000":"#111":e%Xe==0?"#111":"#000")},Qe=.75,Ze=()=>{var e,a;0<E.ze&&(e=E.ze>Qe-.1?(1-E.ze)/.1:E.ze/(Qe-.1),he(.5*e),(e=R.createRadialGradient(E.x,E.y,0,E.x,E.y,50)).addColorStop(0,"#ffff"),e.addColorStop(1,"#fff0"),oe(E.x,E.y,100,e),he(1));for(a of E.Y)a.K.N(a,a.K.u[a.W]);E.K.N(E.x,E.y)},ea=()=>{for(var e of T){var a=e.K;a.N(e.x,e.y,0<e.P?c:void 0),a.ve&&(k(e.x-20,e.y+15,40,3,"#333"),k(e.x-20,e.y+15,e.T/a.T*40,3,"#f33"))}},aa=()=>{for(var e of ze)oe(e.x-3,e.y-3,10<=(e.re??0)?8:6,0<(e.T??0)?"#0c0":(e.re??0)<10?"#05f":"#ff0")},ra={h:"Base damage",$:"Attack speed",g:"Area",T:"Health",H:"Regen",De:"Armor",G:"Speed",j:"Health Drop",V:"Pickup Distance"},ta={$:e=>ne(2-e),T:n,g:ne,G:ne,H:e=>ne(e)+"/s",j:e=>u(100*e)+"%"},sa=e=>e+"/level",na=(e,a)=>{var r,t=Object.entries(e.C).map(([e,a])=>[ra[e],(ta[e]??u)(a.A)]),s=t.push.bind(t);a&&(s([]),s(...Object.entries(e.K.ye).map(([e,a])=>[ra[e],sa(u(z(a),2))])),s([]));for(r of e.Y){let t=r.K.l;s([t+" level",r.W+1],...r.K.O(r.K.u[r.W]).map(([e,a,r=u])=>[t+" "+e,r(a)]))}return t},da=(e,a,r)=>ge(e,a,r,t-a-40,na(E)),la=(e,a,r)=>ge(e,a,r,t-a-40,[["Survived",_(O.Te)],["Level",E.W+1],["Damage",u(O.I)],["DPS",u(O.I/O.Te,2)],["Kills",O.ue]]),ia=()=>{if(k(50,0,p-50,20,"#600"),k(50,0,E.T/E.C.T.A*(p-50),20,"#f66"),b(52,10,n(E.T)+"/"+n(E.C.T.A),c,H,j),k(50,20,p-50,12,h),k(50,20,E.re/E.te*(p-50),12,c),b(52,27,E.re+"/"+E.te,"#000",H,j),k(0,0,50,32,"#000"),b(25,2,"level","#666",r,m),b(25,18,""+(E.W+1),c,r,m),b(l,35,_(O.Te),c,r),O.Te<20){let e=t-30-15*C().length;for(var a of C())a&&b(10,e,a,c,H,m),e+=15}},oa=(a,r,t,s,n,d)=>{for(let e=0;e<d.length;e++)k(a,r,t,s,e===O.Ie?"#333":"#222"),k(a,r,t,s,e===O.Ie?"#aa3":"#444",!0),n(a,r,d[e]),r+=s+5;return r},ma=a=>E.me.filter(e=>e===a).length,pa={[y.de](){var e;a(),b(l,100,"YOU'RE DEAD!","#f88",r,m,24),e=la(50,145,p-100),b(l,e+75,K,c,r)},[y.le](){a(),pe(40,"PAUSED"),da(20,80,p-40)},[y.Pe](){a(),pe(10,"PICK CLASS"),oa(20,50,100,20,(e,a,r)=>{r.N(e+10,a+10),b(e+20,a+10,r.l,c,H,j)},A),ge(140,30,p-140-20,t-60,na(E,!0),!1)},[y.ie](){a(),pe(10,"LEVEL UP"),oa(20,50,p-40,40,(e,a,r)=>{var t=ma(r);b(e+5,a+5,r.l,c),b(e+5,a+22,"string"==typeof r.q?r.q:r.q(),Y),b(e+p-50,a+20,t+"/"+(r._??5),Y,$,j)},O.me),da(20,210,p-40)},[y.pe](){a(),b(l,i-40,"MICRO",c,r,"bottom",68),b(l,i-40,"SURVIVORS",c,r,m,38),b(l,t-5,"by SkaceKamen",Y,r,"bottom",10),he(.75+.25*q(performance.now()/1e3*5)),b(l,i+50,"Press ENTER to start",c,r),he(1)},[y.Le](){a(),b(l,100,"YOU WON",c,r,j);var e=la(70,130,p-140);e+=30,b(l,e,K,c,r)}},ca=()=>{O.ge!==y.pe&&O.ge!==y.Pe&&ia(),pa[O.ge]?.()},ha=()=>{var e=Z(1,E.ne/.5),e=(0<e&&(e=ve(80,"#f000",`rgba(255,0,0,${e})`),a(e)),Z(1,E.oe/.1));0<e&&(e=ve(130,"#fff0",`rgba(255,255,255,${.15*e})`),a(e))},ga=(e,a,r,t)=>ze.push({x:e,y:a,re:t,T:r}),va=t=>{let s=0;var n,d=[];for(n of T){let r=n.K;if(n.T<=0)ga(n.x,n.y,0,r.re),J()<E.C.j.A&&ga(n.x,n.y,5),O.ue+=1,d.push(s);else{n.P-=t;let e=n.He[0]*t,a=n.He[1]*t;var l,i=E.x-n.x,o=E.y-n.y,m=M(i,o);!n.ve&&3*p<m?d.push(s):(n.M<=0?(m<5+(n.K.S??5)-1&&(E.T-=ee(0,r.h-E.C.De.A),E.ne=.5,n.M=1,g(...v.Ce)),l=r.G*t,e+=i/m*l,a+=o/m*l):n.M-=t,n.x+=e,n.y+=a,n.He=n.He.map(e=>{var a=-B(e)*t*(r.Re??20);return z(a)>z(e)?0:e+a}))}s++}let a=0;for(let e of d)T.splice(e-a,1),a+=1},ua=e=>{var a=J()*o,r=ee(p,t)/2,r=M(r,r)+15*J();Fe(E.x+q(a)*r,E.y+F(a)*r,e)},fa=e=>{Oe(e),Object.assign(O,ye),we++,O.ge=y.Oe,T.length=0,ze.length=0},ka=()=>{S.u&&0<O.Ie&&(O.Ie--,g(...v.Ne)),S.d&&O.Ie<O.Me&&(O.Ie++,g(...v.Ne))},ba=0,Ra=e=>{switch(O.ge){case y.Oe:O.Te+=e,S.p&&(O.ge=y.le),E.T<=0&&(O.ge=y.de);var a=n(O.Te/qe),r=Ve[a];O.Te>_e&&0===T.length&&(O.ge=y.Le),r&&(a!==O.ce&&(O.ce=a,r.ve&&ua(r.ve),r.ke?.()),a=r.xe??.205,0<r.be.length&&O.he>a&&(ua(r.be[ba++%r.be.length]),O.he-=a),O.he+=e);break;case y.Le:case y.de:case y.pe:x.e&&(O.Ie=0,O.Me=A.length-1,Oe(A[0]),O.ge=y.Pe,g(...v.Ne));break;case y.Pe:ka();r=A[O.Ie];E.K!==r&&Oe(r),S.e&&(fa(A[O.Ie]),g(...v.Ne));break;case y.ie:ka(),S.e&&((a=O.me[O.Ie]).X(),E.me.push(a),O.ge=y.Oe,g(...v.Ne));break;case y.le:(S.p||S.e)&&(O.ge=y.Oe)}},xa=e=>{let a=ke=0,r=0;x.u&&--r,x.d&&(r+=1),x.l&&--a,x.r&&(a+=1);var t,s,n=E.C.G.A*e,d=M(a,r);0<d&&(E.x+=a/d*n,E.y+=r/d*n),E.L=N(x.Ve-l,x.Ye-i),E.re>=E.te&&(E.W+=1,E.re-=E.te,E.te+=10,E.ze=Qe,Re(75,(e,a)=>be(e,0,a,40)),g(...v.We),E.T+=5),0<E.ze&&(E.ze-=e,E.ze<=0)&&(d=Pe.filter(e=>ma(e)<(e._??5)),O.me=de(d,3,e=>e.Ae?.()??Ae),0<O.me.length)&&(O.ge=y.ie,O.Ie=0,O.Me=O.me.length-1),0<E.ne&&(E.ne-=e),0<E.oe&&(E.oe-=e),E.T=Z(E.C.T.A,E.T+E.C.H.A*e);for(t of E.Y)t.D+=e,t.M<=0?(s=t.K.u[t.W],t.K.D(t,s),t.M=s.R*E.C.$.A):t.M-=e},Sa=e=>{let a=0;var r,t=[];for(r of ze){var s,n=E.x-r.x,d=E.y-r.y,l=M(n,d);l<10?(E.T=Z(E.C.T.A,E.T+(r.T??0)),E.re+=r.re??0,E.oe=.1,g(...v.Ue),t.push(a)):l<E.C.V.A&&(s=(E.C.V.A+10-l)*e*2,r.x+=n/l*s,r.y+=d/l*s),a++}let i=0;for(let e of t)ze.splice(e-i,1),i+=1},Da=0,Aa=e=>{requestAnimationFrame(Aa);var a=(e-Da)/1e3;Da=e,R.reset(),R.clearRect(0,0,p,t),R.translate(-E.x+l,-E.y+i),Je(),aa(),Ze(),ea(),R.resetTransform(),ha(),ca(),e=a,Ra(e),O.ge===y.Oe&&(va(e),Sa(e),xa(e)),S={}};return L.appendChild(ue),requestAnimationFrame(Aa),[E,O]}